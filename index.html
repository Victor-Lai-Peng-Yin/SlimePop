<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Unity WebGL Player | Unityproject</title>
  <link rel="shortcut icon" href="TemplateData/favicon.ico">
  <link rel="stylesheet" href="TemplateData/style.css">
  <link rel="manifest" href="manifest.webmanifest">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div id="unity-container">
    <canvas id="unity-canvas" width="1280" height="720" tabindex="-1"></canvas>
    <div id="unity-loading-bar">
      <div id="unity-logo"></div>
      <div id="unity-progress-bar-empty">
        <div id="unity-progress-bar-full"></div>
      </div>
    </div>
    <div id="unity-warning"></div>
  </div>

  <script>
    window.Telegram.WebApp.ready(function () {
        // 取得 initData
        let initData = window.Telegram.WebApp.initData;

        // 呼叫 Unity 將 initData 傳入
        sendInitDataToUnity(initData);
    });

    function sendInitDataToUnity(initData) {
        // 等待 Unity 載入完成
        if (typeof unityInstance !== 'undefined' && unityInstance !== null) {
            unityInstance.SendMessage('TelegramDataFetcher', 'ReceiveInitData', initData);
        } else {
            // 如果 unityInstance 尚未初始化，可以在這裡添加重試邏輯
            console.error("Unity instance is not initialized yet.");
        }
    }
  </script>

  <script src="index.js"></script>
</body>
</html>
